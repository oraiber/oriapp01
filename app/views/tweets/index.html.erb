<div class="contents">
  <ul class="list">
    <li class="list-item">
      <h3 class="list-tit">みんなの投稿</h3>
      <div class="list-content">
        <p class="list-txt">
          <% @tweets.each do |tweet| %>
            <div class = "box">
              <span class="name">
                <%= tweet.user.nickname %>
              </span>
              <p><%= link_to safe_join(tweet.text.split("\n"),tag(:br)), tweet_path(tweet.id) %></p>
            </div>
          <% end %>
        </p>
      </div>
    </li>
  </ul>
</div>

<script type="text/javascript">
  const accordions = document.querySelectorAll('.list-item');

  accordions.forEach(accordion => {
    accordion.addEventListener('click', () => {
      const content = accordion.querySelector('.list-content');

      content.classList.toggle('active');

      if(content.classList.contains('active')) {
        content.style.height = content.scrollHeight + 'px';
      } else {
        content.style.height = '0px';
      }

    });
  });
</script>